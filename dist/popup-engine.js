!function(t){var e,n,o,s,i,p,r,l,c,h;return l=function(){return window.scrollY-r()},r=function(){var t;return((null!=(t=document.body.getBoundingClientRect())?t.top:void 0)||0)+window.scrollY},s=function(){return"popup_"+Math.floor(1e5*Math.random())},p=function(t,e){var n,o,s;return n=null!=e?"scale("+e+")":"",s="translate3d("+t+")",o=s+" "+n,{webkitTransform:o,mozTransform:o,msTransform:o,oTransform:o,transform:o}},i=function(t){return{webkitTransformOrigin:t+" 0%",mozTransformOrigin:t+" 0%",msTransformOrigin:t+" 0%",oTransformOrigin:t+" 0%",transformOrigin:t+" 0%"}},h={},h.popup={position:"absolute",zIndex:"3000",top:"0",left:"0",width:"100vw",minHeight:"100%",opacity:"0",visibility:"hidden",overflow:"hidden",height:0,transition:function(t){return"all "+t.options.animation/1e3+"s"},whenOpen:{opacity:"1",visibility:"visible",overflow:"visible",height:"auto"}},h.bodyWrapper={whenOpen:{position:"fixed",width:"100%",top:""}},h.content={position:"absolute",zIndex:"2",maxWidth:"100%",transition:function(t){return"transform "+t.options.animation/1e3+"s, -webkit-transform "+t.options.animation/1e3+"s"},margin:"0 auto"},h.content.typeSpecific={center:{left:"50%",transform:p("-50%, 0, 0"),margin:function(t){return t.centerPopup(!0)}},top:{top:0,left:"50%",transform:p("-50%, -100%, 0"),whenOpen:{transform:p("-50%, 0, 0")}},bottom:{bottom:0,left:"50%",transform:p("-50%, 100%, 0"),whenOpen:{transform:p("-50%, 0, 0")}}},h.overlay={position:"fixed",zIndex:"1",left:"0",top:"0",width:"100vw",minHeight:"100vh",backgroundColor:"rgba(0,0,0,0.88)"},c={popup:"<div class='Popup'></div>",content:"<div class='Popup-content'></div>",overlay:"<div class='Popup-overlay'></div>",close:"<div class='Popup-close'></div>",bodyWrapper:"<div class='bodyInnerwrap'></div>"},e=function(n,i,p){var r;return r=t(n),this.name=null!=i?i:i=s(),this.options=t.extend(!0,{},o,p),this.eventCallbacks={},this.isOpen=!1,this.scrollOffset=0,this.els={},this.els.popup=t(c.popup).attr("id",i),this.els.overlay=t(c.overlay).appendTo(this.els.popup),this.els.close=t(c.close).appendTo(this.els.popup),this.els.content=t(c.content).appendTo(this.els.popup),this.els.target=r.first().appendTo(this.els.content),this.attachEvents(),this.appendToDOM(),e.instances[this.name]=this},e.version="3.0.1",e.instances={},e.isOpen=!1,e.defaultOptions=o={type:"center",closeOnEsc:!0,forceOpen:!1,closeOthers:!0,animation:300,styles:h,markup:c},e.prototype.appendToDOM=function(){return this.applyStyles(this.els.popup,this.options.styles.popup),this.applyStyles(this.els.content,this.options.styles.content,this.options.styles.content.typeSpecific[this.options.type]),this.applyStyles(this.els.overlay,this.options.styles.overlay),this.applyStyles(this.els.close,this.options.styles.close||{}),this.els.popup.prependTo(document.body)},e.prototype.centerPopup=function(t){var e,n,o;return e=this.els.content[0].clientHeight,o=window.innerHeight,n=e>=o-80?window.innerWidth>736?100:60:(o-e)/2,t?n+"px auto":this.els.content[0].style.margin=n+"px auto"},e.prototype.applyStyles=function(e,n,o){var s,i,p,r;o&&(n=t.extend({},n,o)),p=e[0]||e;for(s in n)switch(r=n[s],typeof r){case"object":null!=p.style[s]&&this.applyStyles(p,r);break;case"function":i=r(this),"object"==typeof i?this.applyStyles(p,i):p.style[s]=i;break;default:p.style[s]=r}return e},e.prototype.removeStyles=function(t,e,n){var o;return o=new function(){var t;for(t in e)this[t]="";return this},this.applyStyles(t,o,n)},e.prototype.on=function(t,e){var n;if("string"==typeof t&&"function"==typeof e)return null==(n=this.eventCallbacks)[t]&&(n[t]=[]),this.eventCallbacks[t].push(e)},e.prototype.emit=function(t){var e;if("string"==typeof t)return null!=(e=this.eventCallbacks[t])?e.forEach(function(t){return function(e){return e(t)}}(this)):void 0},e.prototype.attachEvents=function(){if(this.els.close.add(this.els.overlay).on("click",function(t){return function(){return t.close()}}(this)),t(document).on("keyup."+this.name,function(t){return function(e){if(27===e.which&&t.isOpen&&t.options.closeOnEsc)return e.stopPropagation(),e.preventDefault(),t.close()}}(this)),"center"===this.options.type)return t(window).on("resize."+this.name,function(t){return function(){if(t.isOpen)return t.centerPopup()}}(this))},e.prototype.detachEvents=function(){return this.els.overlay.off("click."+this.name),t(document).off("keyup."+this.name),t(window).off("resize."+this.name)},e.prototype.close=function(o){var s;if(this.isOpen)return this.emit("beforeClose"),this.removeStyles(this.els.popup,this.options.styles.popup.whenOpen,this.options.styles.popup),this.removeStyles(this.els.content,this.options.styles.content.whenOpen,this.options.styles.content),this.removeStyles(this.els.content,null!=(s=this.options.styles.content.typeSpecific[this.options.type])?s.whenOpen:void 0,this.options.styles.content.typeSpecific[this.options.type]),o||(setTimeout(function(t){return function(){return t.removeStyles(n,t.options.styles.bodyWrapper.whenOpen),window.scroll(0,t.scrollOffset+r())}}(this),400),t(document.body).removeClass("_popupOpen"),e.isOpen=!1),this.isOpen=!1,this.emit("close")},e.prototype.open=function(){var o,s,i,p;if(!e.isOpen||this.options.forceOpen){if(this.emit("beforeOpen"),e.isOpen&&this.options.closeOthers){i=e.instances;for(s in i)o=i[s],o.isOpen&&(this.scrollOffset=o.scrollOffset),o!==this&&o.close(!0)}else this.scrollOffset=l(),this.applyStyles(n,this.options.styles.bodyWrapper.whenOpen,{top:0-this.scrollOffset+"px"});return this.applyStyles(this.els.popup,this.options.styles.popup.whenOpen),this.applyStyles(this.els.content,this.options.styles.content.whenOpen,null!=(p=this.options.styles.content.typeSpecific[this.options.type])?p.whenOpen:void 0),"center"===this.options.type&&this.centerPopup(),setTimeout(function(){return window.scroll(0,0)}),t(document.body).addClass("_popupOpen"),e.isOpen=this.isOpen=!0,this.emit("open")}},e.prototype.destroy=function(){return this.close(),this.detachEvents(),this.els.popup.remove(),delete e.instances[this.name]},e.prototype.replaceWith=function(t){return this.els.content.html(t)},e.prototype.Open=e.prototype.open,e.prototype.Close=e.prototype.close,e.prototype.Destroy=e.prototype.destroy,n=t("<div></div>"),t(function(){return t(document.body).wrapInner(c.bodyWrapper),n=t(document.body).children(".bodyInnerwrap")}),null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=e:"function"==typeof define&&define.amd?define(["Popup"],function(){return e}):window.Popup=e}(jQuery);