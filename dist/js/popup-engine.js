!function(t){var e,o,s;return s=t(".popup-overlay"),o=function(){if(0===s.length)return s=t('<div class="popup-overlay"></div>').prependTo(document.body)},o(),e=function(o,s){return this.name=s||"popup_"+Math.floor(1e5*Math.random()),this.form=o.data("Form")||o.children("form").data("Form"),this.el=t("<div class='popup' id='"+s+"'><div class='popup-close'></div><div class='popup-content'></div></div>"),this.options={closeOnEsc:!0},this.isExitIntent=s.includes("exit-intent"),this.isOpen=!1,this.appendToDOM(o),this.attachEvents(),e.instances[this.name]=this},e.version="2.1.1",e.instances={},e.isOpen=!1,e.prototype.appendToDOM=function(t){return o(),this.el.insertAfter(s),t.first().appendTo(this.el.find(".popup-content"))},e.prototype.attachEvents=function(){return this.el.children(".popup-close").on("click",function(t){return function(){return t.close()}}(this)),s.on("click."+this.name,function(o){return function(){return setTimeout(function(){return s.removeClass("show belongs_to_"+o.name)}),t(".popup.show").removeClass("show"),t(document.body).removeClass("opened-popup"),e.isOpen=!1,o.close()}}(this)),t(document).on("keyup."+this.name,function(t){return function(e){if(27===e.which&&t.isOpen&&t.options.closeOnEsc)return e.stopPropagation(),e.preventDefault(),t.close()}}(this))},e.prototype.detachEvents=function(){return s.off("click."+this.name),t(document).off("keyup."+this.name)},e.prototype.close=function(){if(this.isOpen)return this.el.removeClass("show").addClass("hiding"),setTimeout(function(t){return function(){return t.el.removeClass("hiding")}}(this),1e3),s.removeClass("show belongs_to_"+this.name),t(document.body).removeClass("opened-popup"),e.isOpen=this.isOpen=!1,this.el.trigger("closed")},e.prototype.open=function(){if(!e.isOpen||this.isExitIntent)return s.addClass("show belongs_to_"+this.name),this.isExitIntent&&t(".popup").removeClass("show"),this.el.find(".results").hasClass("show")?this.el.addClass("show"):this.el.addClass("show").find(".step").first().addClass("show"),t(document.body).addClass("opened-popup"),e.isOpen=this.isOpen=!0,this.el.trigger("opened")},e.prototype.reset=function(){return this.form&&this.form.Restart(!0,!0),this.el.trigger("reset")},e.prototype.destroy=function(){return this.close(),this.detachEvents(),this.el.remove(),delete e.instances[this.name]},e.prototype.replaceWith=function(t){return this.el.children(".popup-content").html(t)},e.prototype.Open=e.prototype.open,e.prototype.Close=e.prototype.close,e.prototype.Reset=e.prototype.reset,e.prototype.restart=e.prototype.reset,e.prototype.Destroy=e.prototype.destroy,window.Popup=e}(jQuery);