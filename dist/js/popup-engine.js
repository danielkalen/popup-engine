!function(e){var t;return window.popupOpen=!1,window.appendPopup=function(){if(0===e(".popup-overlay").length)return e(document.body).prepend('<div class="popup-overlay"></div>')},appendPopup(),t=e(".popup-overlay"),this.Popup=function(s,o){var n;return this.name=o||"popup_"+Math.floor(1e5*Math.random()),this.form=s.data("Form")||s.children("form").data("Form"),this.el=e("<div class='popup' id='"+o+"'><div class='popup-close'></div><div class='popup-content'></div></div>"),this.Popup=this.el,n=o.includes("exit-intent"),this.el.insertAfter(t),this.close=function(){var s;return this.el.addClass("hiding").removeClass("show"),setTimeout(function(e){return function(){return e.el.removeClass("hiding")}}(this),1e3),t.removeClass("show belongs_to_"+this.name),e(document.body).removeClass("opened-popup"),s=!1,this.el.trigger("closed")},this.open=function(){var s;return s&&!n||(t.addClass("show belongs_to_"+this.name),n&&e(".popup").removeClass("show"),this.el.find(".results").hasClass("show")?this.el.addClass("show"):this.el.addClass("show").find(".step").first().addClass("show"),e(document.body).addClass("opened-popup")),s&&!n&&log("Another popup is open."),"function"==typeof disableExitIntents&&disableExitIntents(),s=!0,this.el.trigger("opened")},this.reset=function(){return this.form.Restart(!0,!0),this.el.trigger("reset")},this.restart=this.reset,this.destroy=function(){return this.el.remove()},this.replaceWith=function(e){return this.el.children(".popup-content").html(e)},s.first().appendTo(this.el.find(".popup-content")),this.el.children(".popup-close").on("click",function(e){return function(){return e.close()}}(this)),t.on("click",function(){var t;return setTimeout(function(t){return function(){return e(t).removeClass("show belongs_to_"+o)}}(this),0),e(".popup.show").removeClass("show"),e(document.body).removeClass("opened-popup"),t=!1}),this.Close=this.close,this.Open=this.open,this.Reset=this.reset,this.Destroy=this.destroy,this}}(jQuery);